apiVersion: v1
kind: Secret
metadata:
  name: {{ include "reviewer-roulette.fullname" . }}-secret
  labels:
    {{- include "reviewer-roulette.labels" . | nindent 4 }}
type: Opaque
stringData:
  # GitLab Configuration
  GITLAB_TOKEN: {{ .Values.config.gitlab.token | quote }}
  GITLAB_WEBHOOK_SECRET: {{ .Values.config.gitlab.webhookSecret | quote }}

  # PostgreSQL Configuration
  POSTGRES_HOST: {{ .Values.config.postgres.host | quote }}
  POSTGRES_PORT: {{ .Values.config.postgres.port | quote }}
  POSTGRES_DB: {{ .Values.config.postgres.database | quote }}
  POSTGRES_USER: {{ .Values.config.postgres.user | quote }}
  POSTGRES_PASSWORD: {{ .Values.config.postgres.password | quote }}
  POSTGRES_SSL_MODE: {{ .Values.config.postgres.sslMode | quote }}

  # Redis Configuration
  REDIS_HOST: {{ .Values.config.redis.host | quote }}
  REDIS_PORT: {{ .Values.config.redis.port | quote }}
  REDIS_DB: {{ .Values.config.redis.db | quote }}
  {{- if .Values.config.redis.password }}
  REDIS_PASSWORD: {{ .Values.config.redis.password | quote }}
  {{- end }}

  # Mattermost Configuration (optional)
  {{- if .Values.config.mattermost.webhookURL }}
  MATTERMOST_WEBHOOK_URL: {{ .Values.config.mattermost.webhookURL | quote }}
  {{- end }}
